<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Products | Mangal Mart</title>
<link rel="stylesheet" href="style.css">

<style>
  /* --- Layout Enhancements --- */
  .products-section {
    padding: 40px 20px;
    text-align: center;
  }

  .filter-sort-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 20px auto 40px;
  }

  .filter-sort-bar select {
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 15px;
    cursor: pointer;
    background-color: #fff;
  }

  /* --- Product Grid --- */
  .product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 25px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .product-card {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 12px;
    padding: 15px;
    transition: all 0.3s ease;
    box-shadow: 0 1px 4px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  }

  .product-card img {
    width: 100%;
    height: 220px;
    object-fit: cover;
    border-radius: 8px;
    background-color: #fafafa;
  }

  .product-card h3 {
    font-size: 1.05rem;
    margin: 10px 0 5px;
    color: #333;
  }

  .product-card p {
    font-weight: bold;
    color: #d2691e;
    margin-bottom: 10px;
  }

  .btn {
    padding: 10px;
    background: #fc4a1a;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }

  .btn:hover {
    background: #fc4a1a;
  }

  @media (max-width: 768px) {
    .product-card img {
      height: 180px;
    }
  }
</style>
</head>

<body>
  <!-- Header -->
  <header class="header">
  <div class="container">
    <img src="images/logo.png" alt="Mangal Mart Logo" class="logo">

    <div class="hamburger" id="hamburger">
      <span></span><span></span><span></span>
    </div>

    <nav class="nav" id="nav-menu">
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="cart.html">Cart</a>
    </nav>
  </div>
</header>

  <!-- Products Section -->
  <section class="products-section">
    <h2>All Pooja Essentials</h2>

    <!-- Filter + Sort -->
    <div class="filter-sort-bar">
      <select id="filter">
        <option value="all">All Categories</option>
        <option value="thali">Pooja Thali</option>
        <option value="idol">Brass Idols</option>
        <option value="diya">Diyas & Lamps</option>
        <option value="incense">Incense & Accessories</option>
        <option value="rudraksha">Rudraksha & Spiritual Beads</option>
        <option value="kalash">Kalash & Pooja Pots</option>
        <option value="essentials">Daily Pooja Essentials</option>
        <option value="books">Spiritual Books</option>
      </select>

      <select id="sort">
        <option value="default">Sort by</option>
        <option value="low-high">Price: Low to High</option>
        <option value="high-low">Price: High to Low</option>
      </select>
    </div>

    <!-- Product Grid -->
    <div class="product-grid" id="product-list"></div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <p>© 2025 Mangal Mart · All Rights Reserved</p>
  </footer>

  <script>
  // -------- Product Data --------
  const allProducts = [
    // Thali
    { name: "Classic Brass Pooja Thali", price: 999, category: "thali", img: "images/pooja-thali1.jpg" },
    { name: "Silver Plated Pooja Thali", price: 1499, category: "thali", img: "images/pooja-thali2.jpg" },
    { name: "Copper Pooja Thali", price: 1299, category: "thali", img: "images/pooja-thali3.jpg" },
    { name: "Lotus Design Brass Thali", price: 1699, category: "thali", img: "images/pooja-thali4.jpg" },

    // Idols
    { name: "Lord Ganesha Brass Idol", price: 1299, category: "idol", img: "images/brass-ganesha.jpg" },
    { name: "Goddess Lakshmi Idol (Brass)", price: 1099, category: "idol", img: "images/brass-lakshmi.jpg" },
    { name: "Lord Vishnu Brass Idol", price: 1499, category: "idol", img: "images/brass-vishnu.jpg" },
    { name: "Lord Shiva Brass Idol", price: 999, category: "idol", img: "images/brass-shiva.jpg" },

    // Diyas
    { name: "Brass Akhand Diya", price: 599, category: "diya", img: "images/brass-diya1.jpg" },
    { name: "Peacock Brass Diya", price: 799, category: "diya", img: "images/brass-diya2.jpg" },
    { name: "Hanging Brass Diya", price: 899, category: "diya", img: "images/brass-diya3.jpg" },

    // Incense
    { name: "Lavender Dhoop Cones", price: 249, category: "incense", img: "images/incense1.jpg" },
    { name: "Sandalwood Incense Sticks", price: 299, category: "incense", img: "images/incense2.jpg" },
    { name: "Wooden Incense Holder", price: 349, category: "incense", img: "images/incense3.jpg" },

    // Rudraksha
    { name: "5 Mukhi Rudraksha Mala", price: 799, category: "rudraksha", img: "images/rudraksha1.jpg" },
    { name: "1 Mukhi Rudraksha (Certified)", price: 2499, category: "rudraksha", img: "images/rudraksha2.jpg" },
    { name: "Natural Tulsi Mala", price: 499, category: "rudraksha", img: "images/rudraksha3.jpg" },

    // Kalash
    { name: "Pure Copper Kalash (Medium)", price: 699, category: "kalash", img: "images/kalash1.jpg" },
    { name: "Brass Pooja Kalash with Coconut Lid", price: 899, category: "kalash", img: "images/kalash2.jpg" },
    { name: "Silver Plated Decorative Kalash", price: 1299, category: "kalash", img: "images/kalash3.jpg" },

    // Essentials
    { name: "Pure Cow Ghee (250ml)", price: 299, category: "essentials", img: "images/ghee.jpg" },
    { name: "Cotton Wicks (Pack of 100)", price: 99, category: "essentials", img: "images/wicks.jpg" },
    { name: "Loose Cotton for Pooja (100g)", price: 120, category: "essentials", img: "images/loose-cotton.jpg" },
    { name: "Pure Pooja Oil (500ml)", price: 180, category: "essentials", img: "images/pooja-oil.jpg" },
    { name: "Camphor Tablets (100g)", price: 150, category: "essentials", img: "images/camphor.jpg" },
    { name: "Roli & Chawal Set", price: 79, category: "essentials", img: "images/roli-chawal.jpg" },
    { name: "Temple Match Box (Long Sticks)", price: 49, category: "essentials", img: "images/matchbox.jpg" },

    // Books
    { name: "Bhagavad Gita (Hardcover Edition)", price: 499, category: "books", img: "images/book1.jpg" },
    { name: "Hanuman Chalisa Pocket Edition", price: 199, category: "books", img: "images/book2.jpg" },
    { name: "Shri Ramcharitmanas (Hindi)", price: 799, category: "books", img: "images/book3.jpg" },
  ];
  
 document.addEventListener("DOMContentLoaded", () => {

  let defaultProducts = JSON.parse(localStorage.getItem("defaultProducts")) || [];
  let adminProducts = JSON.parse(localStorage.getItem("products")) || [];
  let allProducts = [...defaultProducts, ...adminProducts];

  const productList = document.getElementById("product-list");
  const filterSelect = document.getElementById("filter");
  const sortSelect = document.getElementById("sort");

  function render(list) {
    productList.innerHTML = list
      .map(p => `
      <div class="product-card">
        <img src="${p.img}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p>₹${p.price}</p>
        <button class="btn add-to-cart"
          data-name="${p.name}"
          data-price="${p.price}"
          data-img="${p.img}">
          Add to Cart
        </button>
      </div>`)
      .join("");
  }

  function update() {
    let result = [...allProducts];

    if (filterSelect.value !== "all") {
      result = result.filter(p => p.category === filterSelect.value);
    }

    if (sortSelect.value === "low-high")
      result.sort((a, b) => a.price - b.price);
    else if (sortSelect.value === "high-low")
      result.sort((a, b) => b.price - a.price);

    render(result);
  }
  
   // ✅ Add to Cart - Works now on Products Page
document.addEventListener("click", (e) => {
  if (e.target.classList.contains("add-to-cart")) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const name = e.target.dataset.name;
    const price = +e.target.dataset.price;
    const img = e.target.dataset.img;

    const existing = cart.find(item => item.name === name);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ name, price, img, quantity: 1 });
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    alert(`${name} added to cart ✅`);
  }
});


  // Initial load ✅
  render(allProducts);

  // Dropdown listeners ✅
  filterSelect.addEventListener("change", update);
  sortSelect.addEventListener("change", update);

});

  </script>
</body>
</html>
